<?xml version="1.0"?>

<document>
<properties>
<title>Change Log</title>
<author email="m.b.taylor@bristol.ac.uk">Mark Taylor</author>
</properties>

<body>

<section name="Version History">

<subsection name="Version 0.1">
<p>
<strong>Date:</strong> 31 July 2008<br/>
<strong>Archive:</strong> <a href="../jsamp-0.1/index.html">version 0.1</a>
</p>

<p>Initial release (beta).  Targets SAMP WD v1.0 (25 June 2008).
</p>
</subsection>

<subsection name="Version 0.2">
<p>
<strong>Date:</strong> 19 September 2008<br/>
<strong>Archive:</strong> <a href="../jsamp-0.2/index.html">version 0.2</a>
</p>

<dl>
<dt>Code reorganisation and pluggable XML-RPC implementation:</dt>
<dd>The XML-RPC and Standard Profile-related parts of the library have
    been reorganised somewhat.
    A new package 
    <a target="samp-javadoc"
       href="apidocs/org/astrogrid/samp/xmlrpc/package-summary.html"
                    >org.astrogrid.samp.xmlrpc</a>
    ant its descendants now hold all
    the code which relates specifically to XML-RPC communications and
    the SAMP Standard Profile; the code in the other packages is 
    profile-agnostic and handles only transport-independent aspects
    of the protocol.
    The <code>xmlrpc</code> package itself defines a pluggable 
    interface for providing XML-RPC client and server functionality;
    two implementations are also provided, in the packages 
    <a target="samp-javadoc"
       href="apidocs/org/astrogrid/samp/xmlrpc/apache/package-summary.html"
                                       >xmlrpc.apache</a>
    and
    <a target="samp-javadoc"
      href="apidocs/org/astrogrid/samp/xmlrpc/internal/package-summary.html"
                                      >xmlrpc.internal</a>.
    The Apache one is basically what was there in previous versions;
    the internal one is completely freestanding, and if this is used
    the Apache XML-RPC library is not required for operation.
    </dd>
<dt>GUI functionality added</dt>
<dd>There are more classes in the 
    <a target="samp-javadoc"
       href="apidocs/org/astrogrid/samp/gui/package-summary.html"
                    >org.astrogrid.samp.gui</a> package
    to facilitate high-level use of SAMP within GUI applications.
    <a target="samp-javadoc"
       href="apidocs/org/astrogrid/samp/gui/ConnectorGui.html"
                                           >ConnectorGui</a>
    provides Actions suitable for insertion in a general SAMP control menu,
    and
    <a target="samp-javadoc"
       href="apidocs/org/astrogrid/samp/gui/SendActionManager.html"
                                           >SendActionManager</a>
    provides menus and Actions for sending particular messages.
    </dd> 
<dt>New command <a href="commands.html#Snooper"><code>snooper</code></a>:</dt>
<dd>Logs received messages to the terminal.
    Useful for debugging.
    </dd>
<dt>Minor changes:</dt>
<dd><ul>
    <li>Moved some GUI functionality from <code>client.HubConnector</code>
    to <code>gui.ConnectorGui</code>.</li>
    <li><code>HubClient</code> privateKey member is now an Object
        not a String, for greater generality.</li>
    <li><code>RegInfo(String,String,String)</code> constructor
        withdrawn.</li>
    <li><code>HubRunner</code> class moved from package <code>hub</code>
        to <code>xmlrpc</code>.</li>
    <li>Several other more or less minor changes.</li>
    </ul>
    </dd>
</dl>
</subsection>

<subsection name="Version 0.2-1">
<p>
<strong>Date:</strong> 25 September 2008<br/>
<strong>Archive:</strong> <a href="../jsamp-0.2-1/index.html">Version 0.2-1</a>
</p>

<dl>
<dt>Bugfixes:</dt>
<dd><ul>
    <li>Fixed a problem with XML-RPC implementation when running in
        presence of unexpected (not 1.2) version of Apache XML-RPC
        library.</li>
    <li><code>jsamp.xmlrpc.impl</code> property now correctly propagated
        to JVM running external hub.</li>
    <li>Race condition in unit tests which sometimes gave false 
        failures is fixed.</li>
    <li>Fixed threading problem in <code>hubmonitor</code> which meant that
        sometimes window did not appear.</li>
    <li>Some other minor items.</li>
    </ul>
    </dd>
</dl>
</subsection>

<subsection name="Version 0.3">
<p>
<strong>Date:</strong> 9 December 2008<br/>
<strong>Archive:</strong> <a href="../jsamp-0.3/index.html">Version 0.3</a>
</p>

<dl>
<dt>Major New Features:</dt>
<dd><ul>
    <li>There is now an option for both hub and client GUI to keep track
        of and display messages which have been sent.
        HubRunner and HubMonitor GUIs by default now have tabs
        showing messages sent/received and their current status -
        see <a href="gui.html">GUI Features</a> section for some
        screenshots.
        To see this in action, start the <code>HubRunner</code> in
        (default) <code>msg-gui</code> mode and then run 
        <code>HubTester</code>.  Or just use the hub with your own
        SAMP clients.
        Note that this functionality incurs some overhead - if not used
        no such overhead is incurred.
        </li>
    <li>A new small GUI component is available which just shows the icons for
        all registered clients (like what used to appear in the bottom right
        corner of VODesktop windows).
        </li>
    <li>Facilities have been added for full logging of all XML or RPC 
        communications in the hub or clients.
        See new <code>xml-log</code> and <code>rpc-log</code> options
        to <code>-xmlrpc</code> flags of command-line tools, and classes
        <code>org.astrogrid.samp.xmlrpc.internal.*LoggingInternal*</code>.
        </li>
    <li>Replace <code>DefaultSendActionManager</code> with other,
        more capable, <code>SendActionManager</code> subclasses.
        This makes it easy to handle the results from messages which 
        have been sent, for instance by passing the information to the
        user graphically or in other ways.
        </li>
    <li>HubMonitor tool can now subscribe to messages other than 
        administrative ones, like Snooper.
        </li>
    <li>MessageSender tool now pretty-prints response(s).
        </li>
    </ul>
    </dd>

<dt>Backwards Compatibility:</dt>
<dd>There have been a number of changes since release 0.2 which are 
    backwardly incompatible, so that source code using earlier versions
    of JSAMP will need to be adjusted.  GUI-related functionality is
    most affected.  This is because I'm still 
    designing it, and some changes were required to accommodate new
    features etc; sorry. I hope that there will be fewer backwardly 
    incompatible changes in the future as the library matures - but I'm
    not offering any guarantees just yet.
    Some of the more obvious changes are as follows:
    <ul>
    <li>New class <code>gui.GuiHubConnector</code> now contains the
        Swing-related functionality which was previously in 
        (its superclass) <code>client.HubConnector</code>, and also
        all the functionality from the now removed class
        <code>gui.ConnectorGui</code>.
        </li>
    <li><code>HubRunner</code> and <code>ConnectorGui</code> APIs modified 
        to permit use of various different hub implementations
        (with different graphical characteristics -
        see <code>HubMode</code>).
        </li>
    </ul> 
    If there are things which used to work in a previous version and you
    can't see how to do it now, please contact me and I'll advise how
    to update.
    </dd>

<dt>Bugfixes:</dt>
<dd><ul>
    <li>Fixed server error which sometimes resulted in failed reads,
        especially for long messages.</li>
    <li>Fixed error in handling CalcStorm <code>-xmlrpc</code> flag.</li>
    </ul>
    </dd>

<dt>Other:</dt>
<dd><ul>
    <li>Change return values of <code>callAll</code> and
        <code>notifyAll</code> hub methods as per agreed modifications to 
        the standard at version 1.1.  
        Affects hub and client API, implementation and test suite.</li>
    <li>Default XML-RPC implementation is now Internal rather than
        Apache.</li>
    <li>HubConnector now subscribes to <code>samp.hub.disconnect</code>
        MType.</li>
    <li>Improved performance of internal client when sending long 
        messages.</li>
    <li>Add <code>SampUtils.isSampChar()</code> convenience method.</li>
    <li>Add public <code>createTag</code> method to 
        <code>HubConnector</code>.</li>
    <li>Added test for long messages in HubTester.</li>
    <li>HubTester now tests nearly all legal SAMP 
        <code>string</code> characters.</li>
    <li>...And some other things not mentioned here.</li>
    </ul>
    </dd>
</dl>
</subsection>

<subsection name="Next Version">
<p>
<strong>Date:</strong> ??<br/>
<strong>Archive:</strong> ??
</p>

<ul>
<li>Moved HTTP server implementation used by internal XML-RPC implementation
    into its own package, <code>samp.httpd</code>.  Also added some utility
    classes in that package to facilitate serving dynamic resources and 
    resources from the classpath. 
    This is because having a simple self-contained HTTP server 
    may be useful for client implementations doing SAMP-like things 
    other than strictly communicating with the hub.
    </li>
<li>Add <code>GuiHubConnector.createRegisterOrHubAction</code> method,
    which registers if it can, else offers the user to start a hub.
    This may be the only button you need.
    </li>
<li><code>ResultHandler</code> and <code>LogResultHandler</code> classes
    moved from package <code>gui</code> to <code>client</code>.
    </li>
<li>Add convenience methods <code>call</code> and <code>callAll</code>
    to <code>HubConnector</code> - these allow you to make asynchronous calls
    so that the results are delivered as callbacks to supplied objects
    without having to worry about registering handlers and matching tags.
    </li>
<li>Add <code>createTargetSelector</code>/<code>createTargetAction</code>
    methods to <code>SendActionManager</code> class.
    These give another way (button plus combo box) go allow users to trigger 
    a send.
    </li>
</ul>
</subsection>

</section>

</body>
</document>
